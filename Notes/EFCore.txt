Entity Framework Core
Фреймворк для роботи з даними

1. Встановлення
    Додаємо до проєкту пакети NuGet:
    - Microsoft.EntityFrameworkCore - ядро фреймворку, основний набір засобів
    - Microsoft.EntityFrameworkCore.Tools - засоби командного рядку (PM консолі)
    - Microsoft.EntityFrameworkCore.SqlServer - драйвери для MS SQL Server,
       якщо вживається інша СУБД, то слід знайти віподний пакет

2. Налаштування
EFCore може працювати у декількох режимах
 = Data First (DB First) - коли існує БД, а програма проєктується для неї
    Scaffold - сканування БД
 = Code First - коли БД відсутня, має з'явитись разом з проєктом
   - Ensure... - управління з коду - краще для незмінних БД (за структурою)
   - Migrations - управління через міграції (з РМ консолі) - краще коли БД змінюється
Вибір: Code First - Migrations

Голоний об'єкт EFCore є контекст даних. Можна вважати його "центром керування" даними
[EFCore]
 - class Department - сутність (з основними полями для даних)
 - class EfContext : DbContext - контекст даних
  = public DbSet<Department> Departments { get; set; } - ORM відображення даних
  = override void OnConfiguring(...) - інструкції налаштування підключення даних
     optionsBuilder.UseSqlServer( "...connectionString... ) - рядок підключення
     а) до порожної БД
     б) до неіснуючої БД за навності прав на створення нових БД

3. Ініціалізація
EFCore автоматично сканує нащадків DbContext, досліджує їх структуру, у т.ч. рядок
підключення. Для запуску сканування відкриваємо РМ консоль
 Tools - NuGet PM - PM Console
Вводимо у консоль
PM> Add-Migration Initial
---------------- Результат має вигладати як ----------------------
Build started...
Build succeeded.
To undo this action, use Remove-Migration.
------------------------------------------------------------------
Автоматично створюється файл з класом міграції, у проєкті додається папка Migrations
!! Створення міграції не вносить змін у БД - лише створює код для змін
Для міграцій можно провести аналогії з VCS: міграція - коміт, push - 
Вводимо у консоль
PM> Update-Database
---------------- Результат має вигладати як ----------------------
Build started...
Build succeeded.
Applying migration '20230302111027_Initial'.
Done.
------------------------------------------------------------------

4. Перевірка
Підключаємось до нової БД
 Tools - Connect to Database
 Server name: (LocalDB)\MSSQLLocalDB

5. Внесення змін
- Додаємо сутність Product
- Додаємо DbSet
- Створюємо міграцію
- Оновлюємо БД (застосовуємо міграцію)

6. Використання

